<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éŸ³å£°ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-case {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
        }
        .passed {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
        }
        .failed {
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
        }
        .test-input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #0056b3;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¯ éŸ³å£°ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</h1>
        <p>ã“ã®ãƒšãƒ¼ã‚¸ã§ã¯ã€ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆã®éŸ³å£°èª­ã¿ä¸Šã’ã‹ã‚‰ã€Œ*ã€ã¨URLã‚’é™¤å¤–ã™ã‚‹æ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚</p>
        
        <h2>ğŸ“‹ è‡ªå‹•ãƒ†ã‚¹ãƒˆçµæœ</h2>
        <div id="testResults"></div>
        
        <h2>ğŸ§ª æ‰‹å‹•ãƒ†ã‚¹ãƒˆ</h2>
        <p>ä»¥ä¸‹ã«ãƒ†ã‚¹ãƒˆã—ãŸã„ãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼š</p>
        <input type="text" id="manualTestInput" class="test-input" 
               placeholder="ä¾‹: *é‡è¦* https://example.com ã‚’ãƒã‚§ãƒƒã‚¯ï¼ğŸ˜Š"
               value="*é‡è¦* https://example.com ã‚’ãƒã‚§ãƒƒã‚¯ï¼ğŸ˜Š">
        <br>
        <button onclick="runManualTest()">ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ†ã‚¹ãƒˆ</button>
        <div id="manualTestResult" class="result" style="display:none;"></div>
        
        <h2>ğŸµ å®Ÿéš›ã®éŸ³å£°ãƒ†ã‚¹ãƒˆ</h2>
        <p>å®Ÿéš›ã«éŸ³å£°èª­ã¿ä¸Šã’ã‚’ãƒ†ã‚¹ãƒˆã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼š</p>
        <input type="text" id="speechTestInput" class="test-input" 
               placeholder="éŸ³å£°ãƒ†ã‚¹ãƒˆç”¨ãƒ†ã‚­ã‚¹ãƒˆ"
               value="*ã“ã‚“ã«ã¡ã¯* ç§ã¯Chloeã§ã™ï¼ https://github.com ã‚’å‚ç…§ã—ã¦ãã ã•ã„ğŸ˜Š">
        <br>
        <button onclick="testSpeech()">éŸ³å£°èª­ã¿ä¸Šã’ãƒ†ã‚¹ãƒˆ</button>
        <div id="speechTestResult" class="result" style="display:none;"></div>
    </div>

    <script>
        // ãƒ†ã‚¹ãƒˆç”¨ã®removeEmojisé–¢æ•°ï¼ˆãƒ¡ã‚¤ãƒ³ã®script.jsã¨åŒã˜å®Ÿè£…ï¼‰
        function removeEmojis(text) {
            const emojiRegex = /[\u{1F600}-\u{1F64F}]|[\u{1F300}-\u{1F5FF}]|[\u{1F680}-\u{1F6FF}]|[\u{1F1E0}-\u{1F1FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]|[\u{1F900}-\u{1F9FF}]|[\u{1F018}-\u{1F270}]|[\u{238C}]|[\u{2194}-\u{2199}]|[\u{21A9}-\u{21AA}]|[\u{2934}-\u{2935}]|[\u{23CF}]|[\u{23E9}-\u{23F3}]|[\u{23F8}-\u{23FA}]|[\u{25AA}-\u{25AB}]|[\u{25B6}]|[\u{25C0}]|[\u{25FB}-\u{25FE}]|[\u{2B50}]|[\u{2B55}]|[\u{3030}]|[\u{303D}]|[\u{3297}]|[\u{3299}]/gu;
            
            const urlRegex = /https?:\/\/[^\s]+|www\.[^\s]+|[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]*\.([a-zA-Z]{2,})(\/[^\s]*)?/gi;
            
            const asteriskRegex = /\*/g;
            
            let cleanText = text;
            cleanText = cleanText.replace(emojiRegex, '');
            cleanText = cleanText.replace(urlRegex, '');
            cleanText = cleanText.replace(asteriskRegex, '');
            cleanText = cleanText.replace(/\s+/g, ' ').trim();
            
            return cleanText;
        }

        // ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
        const testCases = [
            {
                name: 'ã‚¢ã‚¹ã‚¿ãƒªã‚¹ã‚¯é™¤å»ãƒ†ã‚¹ãƒˆ',
                input: 'ã“ã‚“ã«ã¡ã¯ï¼* ã“ã‚Œã¯é‡è¦ãª*ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã™ã€‚*',
                expected: 'ã“ã‚“ã«ã¡ã¯ï¼ ã“ã‚Œã¯é‡è¦ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã™ã€‚'
            },
            {
                name: 'URLé™¤å»ãƒ†ã‚¹ãƒˆï¼ˆhttpsï¼‰',
                input: 'ã“ã¡ã‚‰ã®ã‚µã‚¤ãƒˆã‚’ãƒã‚§ãƒƒã‚¯: https://www.example.com ã‚’ã”è¦§ãã ã•ã„ã€‚',
                expected: 'ã“ã¡ã‚‰ã®ã‚µã‚¤ãƒˆã‚’ãƒã‚§ãƒƒã‚¯: ã‚’ã”è¦§ãã ã•ã„ã€‚'
            },
            {
                name: 'URLé™¤å»ãƒ†ã‚¹ãƒˆï¼ˆwwwï¼‰',
                input: 'è©³ç´°ã¯ www.google.com ã§ç¢ºèªã§ãã¾ã™ã€‚',
                expected: 'è©³ç´°ã¯ ã§ç¢ºèªã§ãã¾ã™ã€‚'
            },
            {
                name: 'URLé™¤å»ãƒ†ã‚¹ãƒˆï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³å½¢å¼ï¼‰',
                input: 'example.com ã¨ test.org ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚',
                expected: 'ã¨ ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚'
            },
            {
                name: 'çµµæ–‡å­—é™¤å»ãƒ†ã‚¹ãƒˆ',
                input: 'ã“ã‚“ã«ã¡ã¯ğŸ˜Š ä»Šæ—¥ã¯ã„ã„å¤©æ°—ã§ã™ã­ğŸŒ',
                expected: 'ã“ã‚“ã«ã¡ã¯ ä»Šæ—¥ã¯ã„ã„å¤©æ°—ã§ã™ã­'
            },
            {
                name: 'è¤‡åˆãƒ†ã‚¹ãƒˆï¼ˆå…¨è¦ç´ å«ã‚€ï¼‰',
                input: 'ã“ã‚“ã«ã¡ã¯ğŸ˜Š *é‡è¦* https://example.com ã‚’ãƒã‚§ãƒƒã‚¯ï¼ğŸ‰',
                expected: 'ã“ã‚“ã«ã¡ã¯ é‡è¦ ã‚’ãƒã‚§ãƒƒã‚¯ï¼'
            },
            {
                name: 'ã‚¢ã‚¹ã‚¿ãƒªã‚¹ã‚¯ã®ã¿',
                input: '***',
                expected: ''
            },
            {
                name: 'URLã®ã¿',
                input: 'https://www.example.com',
                expected: ''
            },
            {
                name: 'æ­£å¸¸ãªãƒ†ã‚­ã‚¹ãƒˆ',
                input: 'ã“ã‚Œã¯æ™®é€šã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã™ã€‚',
                expected: 'ã“ã‚Œã¯æ™®é€šã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã™ã€‚'
            }
        ];

        // è‡ªå‹•ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
        function runAutoTests() {
            const resultsDiv = document.getElementById('testResults');
            let html = '';
            let passedTests = 0;
            
            testCases.forEach((testCase, index) => {
                const result = removeEmojis(testCase.input);
                const passed = result === testCase.expected;
                
                if (passed) passedTests++;
                
                html += `
                    <div class="test-case ${passed ? 'passed' : 'failed'}">
                        <h4>${passed ? 'âœ…' : 'âŒ'} Test ${index + 1}: ${testCase.name}</h4>
                        <strong>å…¥åŠ›:</strong> "${testCase.input}"<br>
                        <strong>æœŸå¾…:</strong> "${testCase.expected}"<br>
                        <strong>çµæœ:</strong> "${result}"
                        ${!passed ? '<br><strong style="color:red;">âŒ æœŸå¾…å€¤ã¨ä¸€è‡´ã—ã¾ã›ã‚“</strong>' : ''}
                    </div>
                `;
            });
            
            html = `
                <div class="result">
                    <h3>ğŸ¯ ãƒ†ã‚¹ãƒˆçµæœ: ${passedTests}/${testCases.length} é€šé</h3>
                    ${passedTests === testCases.length ? 
                        '<p style="color:green;">ğŸ‰ å…¨ã¦ã®ãƒ†ã‚¹ãƒˆãŒé€šéã—ã¾ã—ãŸï¼</p>' : 
                        '<p style="color:red;">âš ï¸ ä¸€éƒ¨ã®ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã—ã¾ã—ãŸã€‚</p>'
                    }
                </div>
            ` + html;
            
            resultsDiv.innerHTML = html;
        }

        // æ‰‹å‹•ãƒ†ã‚¹ãƒˆ
        function runManualTest() {
            const input = document.getElementById('manualTestInput').value;
            const result = removeEmojis(input);
            const resultDiv = document.getElementById('manualTestResult');
            
            resultDiv.innerHTML = `
                <h4>ğŸ“‹ ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°çµæœ</h4>
                <p><strong>å…ƒã®ãƒ†ã‚­ã‚¹ãƒˆ:</strong> "${input}"</p>
                <p><strong>ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å¾Œ:</strong> "${result}"</p>
                <p><strong>å¤‰æ›´:</strong> ${input === result ? 'å¤‰æ›´ãªã—' : 'å¤‰æ›´ã‚ã‚Š'}</p>
            `;
            resultDiv.style.display = 'block';
        }

        // éŸ³å£°ãƒ†ã‚¹ãƒˆ
        function testSpeech() {
            const input = document.getElementById('speechTestInput').value;
            const cleanText = removeEmojis(input);
            const resultDiv = document.getElementById('speechTestResult');
            
            if (!cleanText || cleanText.length === 0) {
                resultDiv.innerHTML = `
                    <h4>ğŸ”‡ éŸ³å£°èª­ã¿ä¸Šã’ã‚¹ã‚­ãƒƒãƒ—</h4>
                    <p>ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å¾Œã«ãƒ†ã‚­ã‚¹ãƒˆãŒç©ºã«ãªã£ãŸãŸã‚ã€éŸ³å£°èª­ã¿ä¸Šã’ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã—ãŸã€‚</p>
                `;
            } else {
                resultDiv.innerHTML = `
                    <h4>ğŸ”Š éŸ³å£°èª­ã¿ä¸Šã’ãƒ†ã‚¹ãƒˆ</h4>
                    <p><strong>å…ƒã®ãƒ†ã‚­ã‚¹ãƒˆ:</strong> "${input}"</p>
                    <p><strong>èª­ã¿ä¸Šã’ãƒ†ã‚­ã‚¹ãƒˆ:</strong> "${cleanText}"</p>
                `;
                
                // Web Speech API ã§éŸ³å£°èª­ã¿ä¸Šã’
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance(cleanText);
                    utterance.lang = 'ja-JP';
                    utterance.rate = 0.9;
                    utterance.pitch = 1.2;
                    utterance.volume = 0.8;
                    speechSynthesis.speak(utterance);
                    
                    resultDiv.innerHTML += '<p style="color:green;">âœ… éŸ³å£°èª­ã¿ä¸Šã’ã‚’é–‹å§‹ã—ã¾ã—ãŸ</p>';
                } else {
                    resultDiv.innerHTML += '<p style="color:red;">âŒ ã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯éŸ³å£°èª­ã¿ä¸Šã’ã«å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“</p>';
                }
            }
            
            resultDiv.style.display = 'block';
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«è‡ªå‹•ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
        window.addEventListener('load', runAutoTests);
    </script>
</body>
</html>
